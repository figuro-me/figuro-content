export const title = "QCAD — базовая инструкция по моделированию: прямоугольники, линии, окружности"

export const meta = {
description: "Программа QCAD. Руководство на русском: как создавать объекты, чертить линии и фигуры."
}

# QCAD: базовая инструкция по моделированию

В этой статье-инструкции познакомимся с базовыми инструментами *моделирования* в QCAD.
Под моделированием имеется в виду создание чего-то нового.
Если больше нравится, называйте моделирование черчением или рисованием.

Напомним, что программа [QCAD](https://www.qcad.org/en/) — это бесплатная САПР (система автоматизированного проектирования) с открытым исходным кодом.
Она отлично подходит для создания макетов под лазерную резку и работу с 2D-чертежами в формате DXF.

> В процессе моделирования вам непременно понадобятся инструменты и навыки *редактирования*.
> То есть операции перемещения, удаления, клонирования созданных элементов.
> У нас есть отдельная статья [об основах редактирования в QCAD](/articles/qcad-edit-basics/).
> Предполагаем, что вы освоили её перед тем, как изучать данную инструкцию.

## Задача

Предположим, нам для проекта необходима вентиляционная решётка, которую устанавливают для защиты кулера.

<Figure width="normal" src="./12mm-fan.webp" alt="12-мм кулер" />

По мотивам фотографий в интернете быстро вдохновляемся видами узоров и останавливаемся на том, что подойдёт к нашему проекту.
Делаем от руки грубый скетч, на который будем ориентироваться.

<Figure width="normal" src="./sketch.jpg" alt="Скетч решётки" />

Если произвести замеры кулера линейкой и схематично описать его на словах, получается следующий список требований:

- Внешний габарит кулера — квадрат со стороной 120 мм. Решётку делаем с небольшим перекрытием — квадратом со стороной 125 мм.
- Расстояние между крепёжными отверстиями — 105 мм. Сами отверстия — под винт М4.
- Диаметр лопастей — 116 мм.
- Внутренний диаметр заглушки на вал — 40 мм.
- В качестве каркаса делаем 4 концентрических окружности и 4 касательных луча толщиной 2 мм

Поехали!

## Как начертить квадрат

Если вы прочитали статью об основах редактирования в QCAD, вы догадались: для создания квадратов в пакете есть свой инструмент.
Знакомьтесь:

<QcadTool
menu="Draw → Shape → Rectangle with Size"
toolbar={[
<ToolbarIcon src="../qcad-icons/Shape.png" alt="Shape Tools"/>,
<ToolbarIcon src="../qcad-icons/ShapeRectangleSize.png" alt="Rectangle with Size"/>
]}
shortcut="RS"
commands={["rectanglesize", "linerectanglesize", "rs"]}
/>

Да, это инструмент создания *прямоугольника*, а не обязательно квадрата.
Но если мы выставим ширину, равную высоте, очевидно, получим квадрат.

Выберите инструмент, в панели инструментов задайте желаемую ширину (Width) — 125 и такую же высоту (Height).

<Figure src="./005.png" />

Проведите курсором по рабочей области.
Вы увидите уже знакомое перекрестие и «призрак» будущего квадрата.
При необходимости воспользуйтесь колёсиком, чтобы приблизить или отдалить чертёж.

<Figure src="./010.png" />

Точное расположение нам сейчас не важно, так как это внешняя граница нашего макета и первый элемент чертежа: все остальные элементы будем создавать относительно него.
Кликните в произвольном месте, чтобы создать квадрат.
После того как элемент создан, QCAD останется в режиме черчения квадратов, позволяя наклепать при необходимости ещё несколько.
Сейчас нам это не нужно, поэтому нажмите `Esc`, чтобы вернуться в обычный режим.

## Вычисление центров монтажных отверстий

Теперь наметим места для четырёх крепёжных отверстий по углам.
Исходя из списка наших требований, расстояние между центрами отверстий составляет 105 мм.
А сами они, очевидно, расположены на равных расстояниях от углов рамки.
Но как сделать отступы, чтобы точно соответствовать требованиям?

Есть несколько путей, которыми можно пойти.
Один из них — временно создать вспомогательный квадрат со стороной 105 мм, совместить его центр с центром рамки, а полученные вершины использовать в качестве четырёх центров отверстий.

<Figure src="./helper-square.png" alt="Пример вспомогательного квадрата" width="normal" />

Попробуем?
Снова выберите инструмент “Rectangle with Size” и задайте Width = Height = 105.
На этот раз обратите ещё внимание на настройку точки привязки “Reference Point”.
Мы хотим совместить центры, поэтому и новый квадрат хотим двигать за его центр (Middle): выставьте “Reference Point” в значение “Middle”.
Подвигайте перекрестием по рабочей области и попытайтесь «нащупать» центр рамки.

<Figure src="./020.png" />

Если вы действительно создали первую квадратную рамку «как попало», идеально совместиться с центром не получится.
Дело в том, что QCAD создаёт прямоугольники как набор из четырёх линий, а не как отдельную осмысленную фигуру.
Поэтому в иерархии объектов попросту нет такой точки-зацепки, как центр начерченного прямоугольника.

Но мы можем парой дополнительных линий найти геометрический центр самостоятельно!
Бросьте затею с ручным совмещением центров.
Нажмите `Esc`, чтобы отменить черчение квадрата.

## Как начертить линию по двум точкам

— Внимание, Пятый Бэ класс, как найти геометрический центр прямоугольника?<br/>
— По пересечению двух его диагоналей?<br/>
— Верно!

Начертим первую диагональ.
Для этого нам нужно соединить пару противоположных вершин рамки, то есть построить линию по двум точкам.
С этой задачей в QCAD справится отдельный инструмент:

<QcadTool
menu="Draw → Line → Line from 2 Points"
toolbar={[
<ToolbarIcon src="../qcad-icons/Line.png" alt="Line"/>,
<ToolbarIcon src="../qcad-icons/Line2P.png" alt="Line from 2 Points"/>
]}
shortcut="LI"
commands={["line", "ln", "li", "l"]}
/>

Запустите инструмент.
Первым кликом нужно задать первую точку.
Перекрестием зацепитесь за любую из вершин: вы увидите аннотацию «Пересечение» (Intersection).
Кликните, чтобы поставить первую точку на месте вершины и перейти к определению второй точки.
Аналогично найдите вторую точку на противоположном углу и кликните, чтобы построить сегмент линии.
Нажмите `Esc`, чтобы завершить линию.

<Figure src="./030.png" />

Аналогично постройте вторую диагональ.

<Figure src="./040.png" />

Готово!
У нас есть точка пересечения диагоналей, за которую сможет зацепиться QCAD.

## Как создать квадрат с привязкой к центру

И снова выберите инструмент “Rectangle with Size”.
Настройки “Width”, “Height” = 105 и “Reference Point” = Middle должны остаться с предыдущей попытки.
Подвигайте перекрестием по рабочей области около пересечения диагоналей.

Есть!
Мы можем поставить вспомогательный квадрат точно в центр рамки.

<Figure src="./050.png" />

## Как создать новый слой

У нас есть хорошо выделенные точки для «высверливания» монтажных отверстий по углам.
Но есть небольшая организационная проблема.
Рамка, монтажные отверстия и другие элементы действительно должны быть вырезаны лазером, и эти контура — значимая часть чертежа.
А вот диагонали и квадрат на 105 мм несут исключительно вспомогательную функцию, они не должны участвовать в обработке и лучше, если вообще не будут бросаться в глаза.

Для разделения контуров по ролям в QCAD есть *слои*.
У каждого слоя может быть собственный родной цвет, а ещё их можно независимо включать и выключать.

Давайте выделим вспомогательные контуры в отдельный слой, чтобы не путаться в дальнейшем.
Сначала необходимо создать новый слой.
Обратите внимание на панель “Layer List”.

<Figure src="./060.png" />

Нажмите кнопку “+”, чтобы создать новый слой.
В появившемся диалоговом окне дайте слою осмысленное имя (например, “helpers”) и выберите цвет по умолчанию.

<Figure src="./070.png" />

Теперь нам нужно перенести вспомогательные элементы на этот слой.
Выделите диагонали и четыре стороны внутреннего квадрата.
На панели “Property Editor”, в разделе “General Properties” вы увидите настройку “Layer”.
Сейчас она говорит о том, что все объекты находятся на основном слое с именем “0”.

<Figure src="./080.png" />

Вместо “0” выберите “helpers”.
Геометрия сразу изменит свой цвет в соответствии с настройками нового слоя.
Чтобы это увидеть, снимите выделение.

<Figure src="./090.png" />

Теперь хорошей мыслью будет блокирование вспомогательного слоя от случайных изменений и вообще от выделения его объектов.
А чтобы продолжить работу, нам нужно снова сделать активным слой “0”.
Для этого нажмите на «замочек» напротив слоя “helpers”, а в списке слоёв выделите “0”.

<Figure src="./100.png" />

Приготовления завершены, обратно к черчению!

## Как начертить окружность

Наконец мы можем добавить монтажные отверстия.
Для этого нам понадобится новый инструмент-окружность.

<QcadTool
menu="Draw → Circle → Center, Diameter"
toolbar={[
<ToolbarIcon src="../qcad-icons/Circle.png" alt="Circle"/>,
<ToolbarIcon src="../qcad-icons/CircleCD.png" alt="Circle from center diameter"/>
]}
shortcut="CA"
commands={["circlediameter", "ca"]}
/>

Выберите инструмент.
На панели задайте желаемый диаметр.
У нас винты М4, ещё нужен небольшой припуск: 4,2 мм будет хорошим выбором.
Убедитесь, что точка привязки “Reference Point” выставлена в середину (“Middle”).
Далее по традиции прицельтесь перекрестием в ключевую точку и кликните, чтобы создать первую окружность-отверстие.

<Figure src="./110.png" />

Не выключая инструмент, повторите операцию три раза, для каждого из углов.
Затем, как всегда, нажмите `Esc` для выхода из режима черчения окружностей.
Монтажные отверстия на своих местах!

<Figure src="./120.png" />

Помимо отверстий под винты, нам нужны ещё несколько окружностей: центральная заглушка и внешний диаметр.
Воспользуемся инструментом ещё раз.
Теперь с диаметрами 40 и 116 мм и привязкой к пересечению диагоналей.

<Figure src="./130.png" />

Нам также нужны промежуточные окружности-перекладины.
Можно воспользоваться совершенно тем же подходом, но тогда придётся в уме считать каждый из диаметров.
Это полезно для разминки мозга, но не для того ЭВМ изобрели: пусть лучше считает компьютер.

## Как начертить концентрические окружности

Итак, нам нужны концентрические окружности с определённым шагом.
Вы правильно догадались, в QCAD и на это есть свой инструмент.

<QcadTool
menu="Draw → Line → Parallel (with Distance)"
toolbar={[
<ToolbarIcon src="../qcad-icons/Line.png" alt="Line"/>,
<ToolbarIcon src="../qcad-icons/LineParallel.png" alt="Line parallel"/>
]}
shortcut="LP или PA"
commands={["lineparallel", "lineoffset", "parallel", "par", "lp", "pa"]}
/>

Инструмент работает как с прямыми линиями, так и с кривыми.
Запустите инструмент.
На панели задайте желаемое расстояние между линиями: для пробы выставим 10.
Далее первым кликом инструмент ожидает выбор линии-оригинала, от которой будет строиться параллель.
Кликните на центральную окружность.
Затем попробуйте зайти перекрестием то внутрь окружности, то оставить его снаружи.
В зависимости от положения вы увидите намётку параллельной линии на расстоянии 10 мм то внутри, то снаружи окружности.

<Figure src="./140.png" />

Нам интересен рост наружу, но мы ещё не разобрались с точным расстоянием.
Внешний диаметр — 116 мм, внутренний — 40 мм, всего 4 окружности, растущих в 2 противоположные стороны, поэтому расстояние между соседними должно составлять: `(116 - 40) / 4 / 2`.
Можно бежать за калькулятором, а можно доверить расчёт QCAD.
В качестве значения “Distance” вбейте дословно `(116 - 40) / 4 / 2`, а количество копий “Number” выставьте в 3.

<Figure src="./150.png" />

Идеально!
Кликом завершите создание перегородок.

Помните, что вместо конкретных чисел-значений в большинстве полей ввода параметров QCAD можно также использовать  арифметические выражения.

## Как начертить касательную линию

Последние каркасные контуры будущей решётки — «лучи», которые расходятся по касательной от центральной окружности.
Можно было бы сделать их совпадающими с диагоналями, но ради более интересного внешнего вида будем придерживаться первоначального наброска.
И для этого в QCAD есть инструмент.

<QcadTool
menu="Draw → Line → Tangent (Point, Circle)"
toolbar={[
<ToolbarIcon src="../qcad-icons/Line.png" alt="Line"/>,
<ToolbarIcon src="../qcad-icons/LineTangent1.png" alt="Line tangent point circle"/>
]}
shortcut="LT1"
commands={["linetangent", "tangent", "lt1"]}
/>

Запускаем инструмент.
Первым кликом выбираем первую точку прямой.
Нам подойдёт пересечение внешней окружности с диагональю.
Вторым кликом выбираем окружность, к которой нужно произвести касательную; она определяет вторую точку прямой.

<Figure src="./160.png" />

Повторяем три раза для остальных углов и получаем полный комплект.

<Figure src="./170.png" />

## Как нарастить линию до заданной толщины

Контуры решётки готовы.
Но если отправить макет на резку в текущем виде, получится ерунда.
Линии чертежа есть линии реза.
Поэтому лазер нашинкует центральную часть на отдельные кусочки, которые сгодятся разве что на роль пазла.

Смотрите на созданные контуры как на некий *скелет*, который в итоге не должно быть видно.
А видно должно быть массу, которую мы «наденем» на этот скелет и объединим воедино.

Никакой магии для наращивания массы на скелет не предусмотрено.
Воспользуемся уже знакомым инструментом параллельных линий.
Сначала для окружностей.
Мы хотим толщину в 2 мм, поэтому делаем по одной параллельной линии на расстоянии 1 мм с каждой стороны.
Это позволит сохранить равенство расстояний.

<Figure src="./180.png" />

Оригиналы окружностей, которые служили нам скелетом, удалим.
Они нам больше не понадобятся.
Выделите три окружности через `Shift` и нажмите `Del`.

<Figure src="./190.png" />

Далее — очередь лучей.
Для каждого делаем одну параллельную линию на расстоянии 2 мм во внутреннюю сторону.
Это позволит сохранить форму касательной.

<Figure src="./200.png" />

## Как подгонять и обрезать контуры

Неплохо, но проблема сохраняется.
Контуры лучей насквозь проходят через контуры круглых элементов и небрежно врезаются в центральную заглушку.
К тому же внешний радиус — по-прежнему непрерывная окружность, а это означает, что все внутренние детали никак не держатся на рамке.

Если вы пользовались традиционными векторными редакторами, наверняка вспомнили про булевы операции объединения и пересечения фигур.
Да, они помогли бы, но в QCAD вместо булевых операций есть несколько, пожалуй, более гибких инструментов триммирования.

Первый такой инструмент удаляет сегмент из прямой или кривой.

<QcadTool
menu="Modify → Break out Segment"
toolbar={[
<ToolbarIcon src="../qcad-icons/Modify.png" alt="Modify"/>,
<ToolbarIcon src="../qcad-icons/BreakOut.png" alt="Break out segment"/>
]}
shortcut="D2"
commands={["break", "breakout", "d2"]}
/>

Нам необходимо удалить все кусочки контуров, которые находятся внутри «полезной массы», чтобы сохранить её цельность.
Этот инструмент как раз удаляет выбранный кусочек от пересечения до пересечения с другими контурами.
То, что нужно!

Запустите инструмент.
Кликните по контуру, который хотите удалить от пересечения до пересечения.
Система обрежет контур.

<Figure src="./210.png" />

Повторите на всех аналогичных местах.

<Figure src="./220.png" />

С центральной частью всё точно так же.
Если инструмент “Break out Segment” не может найти пересечения с другим контуром на одной из сторон, сегмент на этой стороне будет удалён полностью.
Это вполне интуитивно понятное поведение.

<Figure src="./230.png" />

Решётка уже цельная, но всё ещё не крепится к раме.
Если вы попробуете так же подрезать внешнюю окружность в местах прихода лучей, обнаружите, что отсекается сразу четверть всей окружности, а не 2 мм внутри луча.
Проблема в том, что одна из линий каждого луча немного не доходит до окружности.

<Figure src="./240.png" />

Продление линии до ближайшего пересечения — типовая задача.
И да, в QCAD есть для неё инструмент.

<QcadTool
menu="Modify → Trim"
toolbar={[
<ToolbarIcon src="../qcad-icons/Modify.png" alt="Modify"/>,
<ToolbarIcon src="../qcad-icons/Trim.png" alt="Trim"/>
]}
shortcut="RM или XT"
commands={["trim", "extend", "rm", "xt"]}
/>

Запустите инструмент.
Первым кликом выберите контур, до которого вы хотите продлить линию.
В нашем случае это внешняя окружность.
Вторым кликом выберите линию, которую нужно продлить.
В нашем случае — короткий луч.

<Figure src="./250.png" />

Повторите для остальных лучей.
Всё, теперь можно воспользоваться “Break out Segment”, чтобы, наконец, убрать лишние сегменты реза и присоединить решётку к раме.

<Figure src="./260.png" />

## Как скруглить углы

Макет уже готов к резке.
Но нет предела совершенству.
Во всякой модели, если нет инженерных ограничений, острые углы лучше закруглять.
В первую очередь это относится к внешнему периметру.
Если оставить такие углы острыми, об них можно поцарапаться.

Давайте исключим травмоопасность и заодно освоим ещё один инструмент.

<QcadTool
menu="Modify → Round"
toolbar={[
<ToolbarIcon src="../qcad-icons/Modify.png" alt="Modify"/>,
<ToolbarIcon src="../qcad-icons/Round.png" alt="Round"/>
]}
shortcut="RN"
commands={["rn", "round"]}
/>

Приблизьте острый угол и запустите инструмент.
Инструмент закругляет угол между двумя пересекающимися или смыкающимися линиями, заменяя его сегментом окружности заданного радиуса.
Для внешнего контура выставим в панели “Radius” примерно как для винтов: 4 мм.
Первым кликом выберите первую линию, формирующую угол.
Следующим кликом — вторую линию и сторону, в которую направить окружность.

<Figure src="./270.png" />

Повторите операцию для всех углов.
Отлично!
Внешний периметр готов.

<Figure src="./280.png" />

Скруглять или нет внутренние углы — дело дизайна, вкуса, технологии производства и конкретной задачи.
Для нашей решётки вполне уместно скруглить углы с радиусом 2 мм.
Углы около центральной окружности оставим как есть, чтобы не портить идею с лучами.
Мы собираемся использовать лазерную резку, и для неё, в отличие от ЧПУ-фрезеровки, острый внутренний угол — не проблема.

<Figure src="./290.png" />

## Как выключить вспомогательные линии

У нас остались вспомогательные линии на слое “helpers”.
И резать по ним совершенно не нужно.
Это не проблема: можно игнорировать их через настройки в редакторе Фигуро, а можно сделать это заранее, чтобы уже не беспокоиться ни о чём после загрузки макета.

Есть два способа:

1. Удалить весь слой “helpers” вместе с содержимым.
2. Скрыть слой “helpers”.

Если содержимое слоя ещё может пригодиться, лучше его просто скрыть.
Для этого нажмите на иконку глаза напротив имени слоя.

<Figure src="./300.png" />

## Результат

Решётка готова к лазерной резке!

Кажется, что мы потратили на неё уйму времени.
Да, это так.
Но она идеально точна по геометрии, а по ходу черчения вы освоили множество инструментов QCAD и подходов к проектированию:

- создание основных контуров;
- поиск ключевых точек геометрическим способом через вспомогательные линии;
- работу со слоями;
- арифметику в параметрах QCAD;
- создание и наращивание скелета;
- подгонку и обрезку контуров;
- скругление острых углов.

Как только вы набьёте на них руку и будете помнить доступный ассортимент, моделирование макетов схожей сложности не отнимет более 10 минут.

Уверен также, что вы хорошо поняли *принцип*, по которому работает QCAD.
Разобраться со всеми остальными инструментами не составит труда.
Комбинируя их в разной последовательности, вы можете создать сколь угодно сложный и точный макет для лазерной резки.

Формулируйте идею, комбинируйте инструменты, сохраняйте DXF и — [к станку](/workshop/)!
